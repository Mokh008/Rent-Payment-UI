<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Rent Contracts System</title>

<style>
/* ===== Color System ===== */
:root{
  --primary:#0F172A;
  --bg:#F8FAFC;
  --text:#020617;
  --card:#0B1220;
  --border:#E5E7EB;
  --accent:#22C55E;
  --accent-dark:#16A34A;
}

/* ===== Base ===== */
*{ box-sizing:border-box; }

body{
  margin:0;
  min-height:100vh;
  font-family:"Segoe UI",Tahoma,sans-serif;
  background:var(--bg);
  color:var(--text);

  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:40px 20px;
}

.container{
  width:100%;
  max-width:1300px;
}

/* ===== Login ===== */
.login-box{
  background:var(--primary);
  color:#fff;
  padding:30px;
  border-radius:18px;
  box-shadow:0 20px 40px rgba(0,0,0,.25);
  margin-bottom:25px;
}

.login-box h2{
  margin:0 0 20px;
  font-size:26px;
}

input{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:none;
  outline:none;
  font-size:16px;
  background:#1F2933;
  color:#fff;
}

button{
  width:100%;
  margin-top:18px;
  padding:14px;
  border-radius:12px;
  border:none;
  background:linear-gradient(135deg,var(--accent),var(--accent-dark));
  color:#022C22;
  font-size:17px;
  font-weight:600;
  cursor:pointer;
}

button:hover{ opacity:.9; }

#error{
  margin-top:12px;
  color:#FCA5A5;
  font-size:14px;
}

/* ===== Table ===== */
.table-wrapper{
  background:var(--card);
  padding:20px;
  border-radius:18px;
  box-shadow:0 15px 30px rgba(0,0,0,.3);
}

table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
  color:#E5E7EB;
}

thead{
  background:#020617;
}

th,td{
  padding:12px 10px;
  text-align:center;
}

th{
  color:#93C5FD;
  font-weight:600;
  border-bottom:1px solid #1F2933;
}

tbody tr{
  border-bottom:1px solid #1F2933;
}

tbody tr:hover{
  background:#020617;
}

/* ===== Badges ===== */
.yes{ color:#22C55E; font-weight:600; }
.no{ color:#9CA3AF; }

.owner{
  color:#FDE68A;
  font-weight:600;
}
</style>
</head>

<body>

<div class="container">

  <div class="login-box">
    <h2>Engineer Login</h2>
    <input type="text" id="engineerId" placeholder="Enter Engineer ID">
    <button onclick="loadData()">Login</button>
    <div id="error"></div>
  </div>

  <div id="result"></div>

</div>

<script>
/* ðŸ”— Google Apps Script URL */
const API_URL =
"https://script.google.com/macros/s/AKfycbwn9TRekl7HRtGtC_cI8ypyHzp8L2y2aQntNQF0KOpS3DeS7nneCRK42FX1eMcOWCZzzQ/exec";

/* ===== Helpers ===== */
function formatDate(d){
  if(!d) return "-";
  return new Date(d).toLocaleDateString("ar-EG");
}

/* ===== Load Data ===== */
function loadData(){
  const id=document.getElementById("engineerId").value.trim();
  const error=document.getElementById("error");
  const result=document.getElementById("result");

  error.innerText="";
  result.innerHTML="";

  if(!id){
    error.innerText="Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³";
    return;
  }

  fetch(API_URL+"?action=getAssets&engineerId="+id)
    .then(res=>res.json())
    .then(showData)
    .catch(()=>{
      error.innerText="Error connecting to server";
    });
}

/* ===== Show Table ===== */
function showData(data){
  const result=document.getElementById("result");

  if(!data || data.length===0){
    result.innerHTML="<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙƒØ§ØªØ¨ Ù†Ø´Ø·Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³</p>";
    return;
  }

  let html=`
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Ø§Ù„Ù…ÙƒØªØ¨ / Ø§Ù„Ø´Ù‚Ø©</th>
          <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
          <th>Ø§Ù„Ù†ÙˆØ¹</th>
          <th>Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± (Ø¬Ù†ÙŠÙ‡)</th>
          <th>Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¹Ù‚Ø¯</th>
          <th>Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¹Ù‚Ø¯</th>
          <th>Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</th>
          <th>Ø£Ø«Ø§Ø«</th>
          <th>Ø·Ø§Ø¨Ø¹Ø©</th>
          <th>Ø§Ù„ØªØ£Ù…ÙŠÙ†</th>
          <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø¤Ø¬Ø±</th>
        </tr>
      </thead>
      <tbody>
  `;

  data.forEach(item=>{
    html+=`
      <tr>
        <td>${item.assetName}</td>
        <td>${item.location}</td>
        <td>${item.assetType}</td>
        <td>${item.monthlyRent}</td>
        <td>${formatDate(item.contractStart)}</td>
        <td>${formatDate(item.contractEnd)}</td>
        <td>${item.remainingDays}</td>
        <td class="${item.hasFurniture==="Yes"?"yes":"no"}">${item.hasFurniture}</td>
        <td class="${item.hasPrinter==="Yes"?"yes":"no"}">${item.hasPrinter}</td>
        <td>${item.deposit}</td>
        <td class="owner">${item.ownerName}</td>
      </tr>
    `;
  });

  html+=`
      </tbody>
    </table>
  </div>
  `;

  result.innerHTML=html;
}
</script>

</body>
</html>
