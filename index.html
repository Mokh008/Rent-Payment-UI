<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Rent Contracts System</title>

<style>
:root{
  --primary:#0F172A;
  --bg:#F8FAFC;
  --text:#020617;
  --login:#6B7280;      /* Gray */
  --card:#0B1220;
  --accent:#22C55E;
  --accent-dark:#16A34A;
}

/* ===== Base ===== */
*{ box-sizing:border-box; }

body{
  margin:0;
  min-height:100vh;
  font-family:"Segoe UI",Tahoma,sans-serif;
  background:var(--bg);
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:30px 20px;
}

.container{
  width:100%;
  max-width:1300px;
}

/* ===== Login Card (Small) ===== */
.login-box{
  background:var(--login);
  padding:18px 22px;
  border-radius:14px;
  box-shadow:0 10px 25px rgba(0,0,0,.25);
  margin-bottom:25px;
  max-width:420px;
}

.login-box h2{
  margin:0 0 10px;
  font-size:18px;
  color:#000;           /* عنوان أسود */
  font-weight:600;
}

.login-box p{
  margin:0 0 12px;
  font-size:13px;
  color:#E5E7EB;        /* فونت أبيض */
}

input{
  width:100%;
  padding:10px 12px;
  border-radius:10px;
  border:none;
  outline:none;
  font-size:14px;
  background:#1F2933;
  color:#fff;
}

button{
  width:100%;
  margin-top:12px;
  padding:11px;
  border-radius:10px;
  border:none;
  background:linear-gradient(135deg,var(--accent),var(--accent-dark));
  color:#022C22;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
}

button:hover{ opacity:.9; }

#error{
  margin-top:10px;
  color:#FECACA;
  font-size:13px;
}

/* ===== Table ===== */
.table-wrapper{
  background:var(--card);
  padding:20px;
  border-radius:18px;
  box-shadow:0 15px 30px rgba(0,0,0,.3);
}

table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
  color:#E5E7EB;
}

thead{
  background:#020617;
}

th,td{
  padding:12px 10px;
  text-align:center;
}

th{
  color:#93C5FD;
  font-weight:600;
  border-bottom:1px solid #1F2933;
}

tbody tr{
  border-bottom:1px solid #1F2933;
}

tbody tr:hover{
  background:#020617;
}

.yes{ color:#22C55E; font-weight:600; }
.no{ color:#9CA3AF; }
.owner{ color:#FDE68A; font-weight:600; }

/* زرار الدفع (جاهز) */
.pay-btn{
  padding:6px 10px;
  border-radius:8px;
  border:none;
  background:#2563EB;
  color:#fff;
  font-size:13px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="container">

  <!-- Login -->
  <div class="login-box">
    <h2>عرض بيانات المكاتب / الاستراحات</h2>
    <p>ادخل رقم الـ ID مثال: <b>1001777</b></p>
    <input type="text" id="engineerId" placeholder="Engineer ID">
    <button onclick="loadData()">عرض البيانات</button>
    <div id="error"></div>
  </div>

  <!-- Result -->
  <div id="result"></div>

</div>

<script>
const API_URL =
"https://script.google.com/macros/s/AKfycbwn9TRekl7HRtGtC_cI8ypyHzp8L2y2aQntNQF0KOpS3DeS7nneCRK42FX1eMcOWCZzzQ/exec";

function formatDate(d){
  if(!d) return "-";
  return new Date(d).toLocaleDateString("ar-EG");
}

function loadData(){
  const id=document.getElementById("engineerId").value.trim();
  const error=document.getElementById("error");
  const result=document.getElementById("result");

  error.innerText="";
  result.innerHTML="";

  if(!id){
    error.innerText="من فضلك أدخل رقم المهندس";
    return;
  }

  fetch(API_URL+"?action=getAssets&engineerId="+id)
    .then(res=>res.json())
    .then(showData)
    .catch(()=>{
      error.innerText="Error connecting to server";
    });
}

function showData(data){
  const result=document.getElementById("result");

  if(!data || data.length===0){
    result.innerHTML="<p>لا توجد بيانات لهذا المهندس</p>";
    return;
  }

  let html=`
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>المكتب / الشقة</th>
          <th>الموقع</th>
          <th>النوع</th>
          <th>الإيجار</th>
          <th>بداية العقد</th>
          <th>نهاية العقد</th>
          <th>الأيام المتبقية</th>
          <th>أثاث</th>
          <th>طابعة</th>
          <th>التأمين</th>
          <th>المؤجر</th>
          <th>الدفع</th>
        </tr>
      </thead>
      <tbody>
  `;

  data.forEach(item=>{
    html+=`
      <tr>
        <td>${item.assetName}</td>
        <td>${item.location}</td>
        <td>${item.assetType}</td>
        <td>${item.monthlyRent}</td>
        <td>${formatDate(item.contractStart)}</td>
        <td>${formatDate(item.contractEnd)}</td>
        <td>${item.remainingDays}</td>
        <td class="${item.hasFurniture==="Yes"?"yes":"no"}">${item.hasFurniture}</td>
        <td class="${item.hasPrinter==="Yes"?"yes":"no"}">${item.hasPrinter}</td>
        <td>${item.deposit}</td>
        <td class="owner">${item.ownerName}</td>
        <td>
          <button class="pay-btn">دفع الإيجار</button>
        </td>
      </tr>
    `;
  });

  html+=`
      </tbody>
    </table>
  </div>
  `;

  result.innerHTML=html;
}
</script>

</body>
</html>
